@{
    ViewData["Title"] = "ProductReview";
    Layout = "~/Areas/AdminCMS/Views/Shared/CMS_Layout.cshtml";
}

@section Styles{
    <style>
        /* 原始圖片的視窗 */
        .image-popup {
            display: none;
            position: absolute;
            top: 0;
            left: 150px;
            /* 將視窗放在圖片右側 */
            /* max-width: 100%; */
            /* 視窗寬度 */
            background-color: #aaa;
            padding: 10px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
            z-index: 1;
        }

            .image-popup img {
                width: 300px;
            }

        /* 縮略圖片的樣式 */
        .thumbnail-image {
            /* position: relative; */
            cursor: pointer;
            /* 將鼠標指針設置為手型以指示圖片可懸停 */
        }

        .test {
            position: relative;
        }

        .form-select {
            width: 200px;
            height: 40px;
        }
    </style>
}

<div class="middle-content">

    <h2 class="mt-3">產品評論管理</h2>

    @*    <div class="container-fluid mt-4 mb-3">
    <div class="row align-items-center">
    發佈日期區間：<input type="text" class="form-control w-25" name="dates" />
    </div>
    </div>*@

    <div class="search-row row mt-3 mb-3">
        <div class="row align-items-center mb-3">
            產品類別：
            <select class="form-select w-25" id="payList">
                <option value="" selected>全部訂單</option>
                <option value="">零食</option>
                <option value="">玩具</option>
                <option value="">貓跳台</option>
                <option value="">貓窩</option>
                <option value="">情緒輔助</option>
                <option value="">保健食品</option>
                <option value="">貓飼料</option>
                <option value="">貓砂</option>
                <option value="">貓砂盆</option>
            </select>
        </div>
        <div class="row align-items-center mb-3">
            評分篩選：
            <select class="form-select w-25" id="deliveryList">
                <option value="" selected>全部訂單</option>
                <option value="">5顆星</option>
                <option value="">4顆星</option>
                <option value="">3顆星</option>
                <option value="">2顆星</option>
                <option value="">1顆星</option>
            </select>
        </div>
        <div class="row align-items-center mb-3">
            狀態篩選：
            <select class="form-select w-25" id="statusList">
                <option value="" selected>全部訂單</option>
                <option value="">公開</option>
                <option value="">隱藏</option>
            </select>
        </div>
        <div class="row align-items-center mb-3">
            關鍵字搜尋：
            <input type="text" class="form-control" style="width:25%;" />
        </div>

        <button type="button" class="keyword_input col-xl-1">查詢</button>
    </div>


    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <!--表格-->
                <table id="PReview-table" class="table table-striped nowrap" style="width:100%">
                    <thead>
                        <tr>
                            <!-- <th>序號</th> -->
                            <th>ID</th>
                            <th>產品類別</th>
                            <th>產品名稱</th>
                            <th>圖片</th>
                            <th>評分</th>
                            <th>評論表ID</th>
                            <th>評論會員</th>
                            <th>發佈時間</th>
                            <th>狀態</th>
                            <th>編輯/刪除</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <!-- <td>1</td> -->
                            <td>1</td>
                            <td>貓咪用品</td>
                            <td>好好用貓砂</td>
                            <td class="test">
                                <img src="https://www.costco.com.tw/medias/sys_master/images/hb4/h77/28534423486494.jpg"
                                     width="100" height="100" class="thumbnail-image">
                                <!-- 原始圖片的視窗 -->
                                <div class="image-popup">
                                    <img src="https://www.costco.com.tw/medias/sys_master/images/hb4/h77/28534423486494.jpg"
                                         alt="Original Image">
                                </div>
                            </td>
                            <td>5 顆星</td>
                            <td>001</td>
                            <td>A小姐</td>
                            <td>2023/08/16 17:58:29</td>
                            <td>公開</td>
                            <td>
                                <button class="btn" data-bs-toggle="modal"
                                        href="#exampleModalToggle2" role="button">
                                    <i class="fas fa-edit"></i>
                                </button>｜<button class="btn" onclick="userDelete()">
                                    <a href="#" id="b5">
                                        <i class="fas fa-trash-alt"></i>
                                    </a>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <!--表格-->
                <!--編輯彈出視窗-->
                <div class="modal fade" id="exampleModalToggle2" aria-hidden="true"
                     aria-labelledby="exampleModalToggleLabel" tabindex="-1">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalToggleLabel">編輯 Edit</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="tab-content" id="nav-tabContent">
                                    <div class="tab-pane fade show active"
                                         id="member-edit-nav-home">
                                        <form>
                                            <div class="form-group">
                                                <label for="w3review">評論內容：</label>
                                                <textarea class="form-control" id="w3review" name="w3review" rows="4" cols="50" readonly disabled>商品很棒！！值得購入~</textarea>
                                            </div>

                                            <div class="form-group">
                                                <label for="w3review">狀態：</label>
                                                <select name="" id="" class="form-select">
                                                    <option value="">公開</option>
                                                    <option value="">隱藏</option>
                                                </select>
                                            </div>

                                            <button class="btn btn-danger btn-block mt-4"
                                                    style="width: 100%;">
                                                儲存
                                            </button>
                                        </form>
                                    </div>
                                    <div class="tab-pane fade" id="member-edit-nav-paper">
                                        <p>顯示優惠券 | <button>刪除</button></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--編輯彈出視窗-->
            </div>
        </div>
    </div>

</div>

@section Scripts{

    @* <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />*@

    <script>
        //$('input[name="dates"]').daterangepicker();

        new DataTable('#PReview-table', {
            responsive: true,
            "searching": false, //隱藏搜尋框

            //========隱藏某一欄
            // columnDefs: [
            // {
            //     target: 10,
            //     visible: false,
            //     searchable: false
            // },
            // {
            //     target: 11,
            //     visible: false
            // }
            // ]
        });

        //圖片縮放設定  當頁面載入完成後執行
        document.addEventListener("DOMContentLoaded", function () {
            // 獲取所有包含縮略圖片和視窗的元素
            const thumbnailImages = document.querySelectorAll(".thumbnail-image");
            const imagePopups = document.querySelectorAll(".image-popup");

            // 對每個圖片進行事件處理
            thumbnailImages.forEach((thumbnailImage, index) => {
                // 當滑鼠懸停在圖片上時
                thumbnailImage.addEventListener("mouseover", function () {
                    // 顯示對應的原始圖片的視窗
                    imagePopups[index].style.display = "block";
                });

                // 當滑鼠移開圖片時
                thumbnailImage.addEventListener("mouseout", function () {
                    // 隱藏對應的原始圖片的視窗
                    imagePopups[index].style.display = "none";
                });
            });
        });

        function userDelete() {
            Swal.fire({
                title: '確定要刪除嗎?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire(
                        'Deleted!',
                        'Your file has been deleted.',
                        'success'
                    )
                }
            })
        }
    </script>
}

